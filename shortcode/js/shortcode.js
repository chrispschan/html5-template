!function o(i,s,l){function p(t,e){if(!s[t]){if(!i[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=s[t]={exports:{}};i[t][0].call(n.exports,function(e){return p(i[t][1][e]||e)},n,n.exports,o,i,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)p(l[e]);return p}({1:[function(e,t,a){"use strict";e("map/demo/toggleMarker")},{"map/demo/toggleMarker":3}],2:[function(e,t,a){"use strict";Element.prototype.getDataset=function(){if(!this.dataset){var e=this.attributes,t=[],a="";this.dataset={};for(var r=0;r<e.length;r++)if("data-"===e[r].localName.substr(0,5)){t=e[r].localName.split("-"),a="";for(var n=1;n<t.length;n++)a+=1===n?t[n]:t[n].substr(0,1).toUpperCase()+t[n].substr(1);this.dataset[a]=e[r].value}}return this.dataset},Element.prototype.addClass=function(e){this.classList?this.classList.add(e):this.className+=" "+e},Element.prototype.removeClass=function(e){this.classList?this.classList.remove(e):this.className=this.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},Element.prototype.hasClass=function(e){return this.classList?this.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(this.className)}},{}],3:[function(e,t,a){"use strict";var r,n=e("map");var i=new((r=n)&&r.__esModule?r:{default:r}).default(".mapDemoToggleMarker",{markers:[{position:{lat:22.28552,lng:114.15769},label:"M0"},{position:{lat:22.26479252616582,lng:113.9421272277832},label:"M1"},{position:{lat:22.35245727253212,lng:114.11859512329102},label:"M2"}]});i.waitReady(function(){for(var o=document.getElementById("mapDemoToggleMarkerIndex"),e=function(a){var r=i.layer[0][a].markerId,n=i.layer[0][a].position;document.getElementById("mapDemoShowButton"+a).addEventListener("click",function(e){var t=Number(o.value);console.log(i.toggleMarker({show:!0},r,t)),console.log(i.layer)}),document.getElementById("mapDemoHideButton"+a).addEventListener("click",function(e){var t=Number(o.value);console.log(i.toggleMarker({show:!1},r,t)),console.log(i.layer)}),document.getElementById("mapDemoRemoveButton"+a).addEventListener("click",function(e){var t=Number(o.value);console.log(i.toggleMarker({remove:!0},r,t)),console.log(i.layer)}),document.getElementById("mapDemoResetButton"+a).addEventListener("click",function(e){var t=Number(o.value);i.toggleMarker({remove:!0},r,t),i.addMarkers({position:n,label:"M"+a},t),console.log(i.layer)})},t=0;t<3;t++)e(t)})},{map:4}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}();e("object/object.property"),e("element/element.property");var n,o=e("plugin"),s=(n=o)&&n.__esModule?n:{default:n};var l=function(e){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".map",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));if(a._options=Object.assign({key:"",language:"",region:"",zoom:10,center:{lat:22.28552,lng:114.15769}},t),a._map=[],a._layer=[],a._ready=!1,a._mapEle=document.querySelectorAll(e),"undefined"!=typeof google)a._initMap(a);else{var r="https://maps.googleapis.com/maps/api/js";if(""===a._options.key&&""===a._options.language&&""===a._options.region||(r+="?"),""!==a._options.key&&(r+="key="+a._options.key),""!==a._options.language&&""!==a._options.key&&(r+="&"),""!==a._options.language&&(r+="language="+a._options.language),""===a._options.region||""===a._options.key&&""===a._options.language||(r+="&"),""!==a._options.region&&(r+="region="+a._options.region),"cn"===a._options.region&&(r=r.replace("https://maps.googleapis.com","http://maps.google.cn")),a._options.libraries){r+=-1===r.search("=")?"?libraries=":"&libraries=";for(var n=0;n<a._options.libraries.length;n++)r+=0===n?a._options.libraries[n]:","+a._options.libraries[n]}a._loadPlugin(r,a._initMap)}return a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,s.default),r(o,[{key:"_initMap",value:function(e){for(var t={},a=0;a<e._mapEle.length;a++){if(delete(t=Object.assign({},e._options)).key,delete t.geolocation,delete t.geolocationOption,delete t.events,delete t.markers,delete t.language,delete t.region,e._mapEle[a].getDataset(),"object"===i(e._mapEle[a].dataset))for(var r in e._mapEle[a].dataset){var n=r.substr(3);switch(n=n.substr(0,1).toUpperCase()+n.substr(1),r){case"mapClickableIcons":case"mapDisableDefaultUI":case"mapDisableDoubleClickZoom":case"mapDraggable":case"mapFullscreenControl":case"mapKeyboardShortcuts":case"mapMapTypeControl":case"mapNoClear":case"mapPanControl":case"mapRotateControl":case"mapScaleControl":case"mapScrollwheel":case"mapStreetViewControl":case"mapZoomControl":t[n]="true"===e._mapEle[a].dataset[r];break;case"mapHeading":case"mapMaxZoom":case"mapTilt":case"mapZoom":t[n]=Number(e._mapEle[a].dataset[r]);break;case"mapCenter":var o=e._mapEle[r].dataset.mapCenter.replace(/ /g,"").split(",");2<=o.length&&(t[n]={lat:o[0],lng:o[1]});break;case"mapFullscreenControlOptions":case"mapPanControlOptions":case"mapRotateControlOptions":case"mapScaleControlOptions":case"mapStreetViewControlOptions":case"mapZoomControlOptions":t[n]={position:e._mapEle[a].dataset[r]};break;case"mapGeolocation":break;default:t[n]=e._mapEle[a].dataset[r]}}e._map.push(new google.maps.Map(e._mapEle[a],t)),e._map[a].mapIndex=a,("true"===e._mapEle[a].dataset.mapGeolocation||e._options.geolocation)&&e._geolocation(a),e._options.events&&e.addEvents(e._options.events,a),e._options.markers&&e.addMarkers(e._options.markers,a)}e._ready=!0}},{key:"_geolocation",value:function(e){var a=this,r=this._options.geolocationOption?this._options.geolocationOption:{},n=0===parseInt(e)?0:parseInt(e)||-1;function t(e,t){console.log(t)}navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};r.marker&&(r.marker.position=t,a.addMarkers([r.marker])),a._map[n].setCenter(t)},function(){t(!0,a._map[e].getCenter())},r):t(!1,this._map[e].getCenter())}},{key:"setZoom",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;function a(e){e.setZoom(t),n.push(e.mapIndex)}var r=0===parseInt(e)?0:parseInt(e)||-1,n=[];if(-1===r)for(var o=0;o<this._map.length;o++)a(this._map[o]);else this._map[r]&&a(this._map[r]);return!(n.length<=0)&&n}},{key:"setCenter",value:function(t){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1;function r(e){a?e.panTo(t):e.setCenter(t),o.push(e.mapIndex)}var n=0===parseInt(e)?0:parseInt(e)||-1,o=[];if(-1===n)for(var i=0;i<this._map.length;i++)r(this._map[i]);else this._map[n]&&r(this._map[n]);return!(o.length<=0)&&o}},{key:"addEvents",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,a=[];for(var r in e)a=a.concat(this._addEvent(r,e[r],t));return a}},{key:"_addEvent",value:function(t,a){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1;function r(e){o&&google.maps.event.clearListeners(e,t),e.addListener(t,function(e){n(e,this)}),s.push({type:a.type?a.type:"map",event:t,markerId:e.markerId?e.markerId:null,mapIndex:e.mapIndex?e.mapIndex:e.mapId})}var n="function"==typeof a?a:a.callback,o=!0===a.disableOther,i=0===parseInt(e)?0:parseInt(e)||-1,s=[];switch(a.type){case"marker":for(var l=this._findMarker(a.marker,i),p=0;p<l.length;p++)r(l[p]);break;default:if(-1===i)for(var u=0;u<this._map.length;u++)r(this._map[u]);else this._map[i]&&r(this._map[i])}return s}},{key:"addMarkers",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1;function a(e,t){for(var a=0;a<o.length;a++){var r=Object.assign({},o[a]),n=parseInt(r.layer)||0;n<0&&(n=0),r.map=t,delete r.layer,e._addMarker(r,n,t.mapIndex)}i.push({mapIndex:t.mapIndex,addMarkers:o.length})}var o=Array.isArray(e)?e:[e],r=0===parseInt(t)?0:parseInt(t)||-1,i=[];if(-1===r)for(var n=0;n<this._map.length;n++)a(this,this._map[n]);else this._map[r]&&a(this,this._map[r]);return i}},{key:"_addMarker",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(e.position){var r=e,n=void 0,o=parseInt(a)||0,i=e.events,s=void 0;if(delete r.events,"function"==typeof r.position.lat&&(r.position.lat=r.position.lat()),"function"==typeof r.position.lng&&(r.position.lng=r.position.lng()),"number"==typeof r.position.lat&&"number"==typeof r.position.lat){if(n=new google.maps.Marker(r),this._layer.length<t+1)for(var l=this._layer.length;l<t+1;l++)this._layer.push([]);if(n.markerId=t+"-"+n.position.lat()+"-"+n.position.lng(),n.mapId=o,i)for(var p in i)(s=i[p]).type="marker",s.marker=n,this._addEvent(p,s,o);this._layer[t].push(n)}}}},{key:"toggleLayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,r=void 0,n=Object.assign({show:!0,remove:!1},e),o=0===parseInt(t)?0:parseInt(t)||-1,i=0===parseInt(a)?0:parseInt(a)||-1;if(-1===o){r=Array.isArray(this.layer[0])?this.layer[0]:[];for(var s=1;s<this._layer.length;s++)r=r.concat(this._layer[s])}else r=Array.isArray(this.layer[o])?this.layer[o]:[];return-1!==i&&(r=r.filter(function(e){return e.mapId===i})),this.toggleMarker(n,r)}},{key:"toggleMarker",value:function(e,t){var a=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,n=void 0,o=Object.assign({show:!0,remove:!1},e),i=void 0,s={action:o.remove?"remove":o.show?"show":"hide",markers:[]};if(n=this._findMarker(t,r),o.show&&!o.remove)for(var l=0;l<n.length;l++){if(-1===n[l].mapId)for(var p=0;p<this._map.length;p++)n[l].setMap(this._map[p]);else n[l].setMap(this._map[n[l].mapId]);s.markers.push({markerId:n[l].markerId,mapId:n[l].mapId})}else for(var u=function(t){n[t].setMap(null),o.remove&&((i=n[t].markerId.split("-"))[0]=parseInt(i[0]),"string"!=typeof i[0]&&(a._layer[i[0]]=a._layer[parseInt(i[0])].filter(function(e){return!(e.markerId===n[t].markerId&&e.mapId===n[t].mapId)}))),s.markers.push({markerId:n[t].markerId,mapId:n[t].mapId})},c=0;c<n.length;c++)u(c);return s}},{key:"_findMarker",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,a=void 0,r=void 0,n=0===parseInt(e)?0:parseInt(e)||-1;return"string"==typeof t?3<=(r=t.split("-")).length?(r[0]=parseInt(r[0]),"string"!=typeof r[0]&&(a=this._layer[r[0]].filter(function(e){return e.markerId===t}))):a=[]:a=Array.isArray(t)?t:[t],-1!==n&&0<a.length&&(a=a.filter(function(e){return e.mapId===n})),a}},{key:"nearMarkers",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:-1;function n(e){return e*Math.PI/180}var o=0===parseInt(a)?0:parseInt(a)||-1,i=0===parseInt(r)?0:parseInt(r)||-1,s=[],l=[];if(-1===o)for(var p=0;p<this._layer.length;p++)Array.isArray(this._layer[p])&&(s=s.concat(this._layer[p]));else Array.isArray(this._layer[o])&&(s=this._layer[o]);for(var u=0;u<s.length;u++){var c=s[u].position.lat(),m=s[u].position.lng(),f=n(c-e.lat),g=n(m-e.lng),d=Math.sin(f/2)*Math.sin(f/2)+Math.cos(n(e.lat))*Math.cos(n(e.lat))*Math.sin(g/2)*Math.sin(g/2);6371*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))<=t&&(-1!==i&&s[u].mapId!==i||l.push(s[u]))}return l}},{key:"map",get:function(){return this._map}},{key:"layer",get:function(){return this._layer}},{key:"zoom",get:function(){for(var e=[],t=0;t<this._map.length;t++)e.push(this._map[t].getZoom());return e}},{key:"center",get:function(){for(var e=[],t=0;t<this._map.length;t++)e.push({lat:this._map[t].getCenter().lat(),lng:this._map[t].getCenter().lng()});return e}}]),o}();a.default=l},{"element/element.property":2,"object/object.property":5,plugin:6}],5:[function(e,t,a){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.assign=function(){return function e(t){var a={};for(var r=0;r<t.length;r++)if("object"===i(t[r]))for(var n in t[r])if("object"!==i(t[r][n])||Array.isArray(t[r][n]))if(Array.isArray(t[r][n])){a[n]=[];for(var o=0;o<t[r][n].length;o++)"object"===i(t[r][n][o])?a[n].push(e([{},t[r][n][o]])):a[n].push(t[r][n][o])}else a[n]=t[r][n];else a[n]=e([a[n]?a[n]:{},t[r][n]]);return a}(arguments)}},{}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}}();var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ready=!1}return r(e,[{key:"_loadPlugin",value:function(e,t){var a=this,r=document.getElementsByTagName("head")[0],n=document.createElement("script");return n.type="text/javascript",n.src=e,n.addEventListener("load",function(){t(a)}),r.appendChild(n),e}},{key:"waitReady",value:function(a){var r=null;return function e(t){t._ready?(a(),null!==r&&clearInterval(r)):null===r&&(r=setInterval(function(){e(t)},200))}(this),!0}},{key:"ready",get:function(){return this._ready}}]),e}();a.default=n},{}]},{},[1]);
//# sourceMappingURL=shortcode.js.map
