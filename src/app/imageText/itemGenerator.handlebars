{{~#setVal~}}
    itemGeneratorCanDivInside:canDivInside = {{#if ../options.tag}}{{../../options.tag}}{{else}}div{{/if}};
{{~/setVal~}}

{{~#if @local.itemGeneratorCanDivInside~}}
    {{~#setVal~}}
        itemGeneratorInsideTab:json = {"tag": "div"};
    {{~/setVal~}}
{{~else~}}
    {{~#setVal~}}
        itemGeneratorInsideTab:json = {"tag": "span"};
    {{~/setVal~}}
{{~/if~}}

{{~#each items as |item index|~}}
    {{~#setVal~}}
        itemGeneratorOptions:assignObj = [{{{obj2json ../../options}}}, {{{obj2json @local.itemGeneratorInsideTab}}}, {{{obj2json item.options}}}];
    {{~/setVal~}}

    {{~#ifCond item.type "===" "image"~}}
        {{~> imageText/image id=item.id class=item.class src=item.src dataset=item.dataset options=@local.itemGeneratorOptions~}}
    {{~else~}}
        {{~#> imageText/text id=item.id class=item.class src=item.src dataset=item.dataset options=@local.itemGeneratorOptions~}}
            {{~#setVal~}}
                itemGeneratorSubCanDivInside:canDivInside = {{#if @local.itemGeneratorOptions.tag}}{{@local.itemGeneratorOptions.tag}}{{else}}{{/if}};
            {{~/setVal~}}

            {{~#if @local.itemGeneratorSubCanDivInside~}}
                {{~#setVal~}}
                    itemGeneratorSubInsideTab:json = {"tag": "p"};
                {{~/setVal~}}
            {{~else~}}
                {{~#setVal~}}
                    itemGeneratorSubInsideTab:json = {"tag": "span"};
                {{~/setVal~}}
            {{~/if~}}

            {{~#ifTypeof item.content "object"~}}
                {{~#each item.content ~}}
                    {{~#> imageText/textItem options=@local.itemGeneratorSubInsideTab~}}
                        {{{this.content}}}
                    {{~/imageText/textItem~}}
                {{~/each~}}
            {{~else~}}
                {{~#> imageText/textItem options=@local.itemGeneratorSubInsideTab~}}
                    {{{item.content}}}
                {{~/imageText/textItem~}}
            {{~/ifTypeof~}}
            
        {{~/imageText/text~}}
    {{~/ifCond~}}
{{~/each~}}
